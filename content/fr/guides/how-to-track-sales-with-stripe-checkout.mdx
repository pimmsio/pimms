---
title: Guide pas Ã  pas des devs pour suivre les conversions Stripe Checkout
summary: Apprends Ã  attribuer tes paiements Stripe Checkout avec PiMMs â€” connecte chaque vente Ã  son clic dâ€™origine avec seulement quelques lignes de code.
publishedAt: 2025-05-20
updatedAt: 2025-05-20
slug: suivre-conversions-stripe-checkout-avec-pimms
image: https://assets.pimms.io/stripe-checkout-guide-pimms.webp?v=2
author: alexandre
categories:
  - guides
related:
  - setup-stripe-for-website
  - introducing-conversion
---

Tu veux savoir exactement quel clic a gÃ©nÃ©rÃ© une vente Stripe Checkout ?

Ce guide tâ€™explique comment suivre les **Ã©vÃ©nements de vente** avec **Stripe Checkout**, en utilisant **PiMMs** â€” la mÃ©thode recommandÃ©e pour les dÃ©veloppeurs.

ğŸ‘‰ Avant de commencer, assure-toi de bien comprendre le fonctionnement de lâ€™attribution dans PiMMs :  
ğŸ“˜ [Comment PiMMs suit les clics, les leads et les ventes](/articles/introducing-conversion)

## Ce que tu vas accomplir

Ã€ la fin de ce guide, tu seras capable de :

- Suivre automatiquement chaque vente rÃ©alisÃ©e via Stripe Checkout  
- Lâ€™attribuer au bon lien PiMMs (clic source)  
- Lier cette conversion Ã  un utilisateur ou client dans ton app  

PiMMs sâ€™occupe de la complexitÃ© technique â€” tu nâ€™as quâ€™Ã  transmettre les bons identifiants au bon moment.

## 1. PrÃ©requis

Avant dâ€™attaquer le code, vÃ©rifie que tu as bien fait les Ã©tapes suivantes :

- **Le tracking cÃ´tÃ© client est activÃ©**

Voir [Installer le script ou SDK PiMMs sur ton site](/articles/introducing-conversion)

- **Tes liens ont le suivi de conversion activÃ©**

Soit globalement dans les **paramÃ¨tres de lâ€™espace de travail**, soit lien par lien via le **Link Builder**.

- **Lâ€™intÃ©gration officielle PiMMs x Stripe est installÃ©e**

Suis les Ã©tapes dans le [guide Stripe](/articles/setup-stripe-for-website)

## 2. Utilise les sessions Checkout pour suivre les ventes

Si tu utilises `stripe.checkout.sessions.create`, il te suffit de transmettre le bon identifiant utilisateur au moment de crÃ©er la session.

Ã‡a permet Ã  PiMMs de relier lâ€™achat au clic dâ€™origine et Ã  lâ€™utilisateur dans ta base.

Utilise l'identifiant que tu as utilisÃ© pour crÃ©er la conversion.

Exemple :

```js
import { stripe } from "@/lib/stripe"

const user = {
  id: "user_123",
  email: "user@example.com"
}

const pimms_id = req.cookies["pimms_id"]

const session = await stripe.checkout.sessions.create({
  customer_email: user.email,
  client_reference_id: "project_123",
  metadata: {
    // ton identifiant utilisateur interne (celui utilisÃ© pour crÃ©er la conversion)
    pimmsCustomerId: user.id 
  }
})
```

Et câ€™est tout.

## 3. Utiliser les objets Stripe Customer (flux alternatif)

Si tu **nâ€™utilises pas Stripe Checkout**, tu peux quand mÃªme faire lâ€™attribution en stockant les donnÃ©es dans lâ€™objet **Customer** de Stripe.

### Option A â€” Lors de la crÃ©ation du client

Transmets les valeurs `pimmsCustomerId` et `pimmsClickId` dans les mÃ©tadonnÃ©es :

```js
import { stripe } from "@/lib/stripe"

const user = {
  id: "user_123",
  email: "user@example.com",
  teamId: "team_xxxxxxxxx"
}

const pimms_id = req.headers.get("pimms_id")

await stripe.customers.create({
  email: user.email,
  name: user.name,
  metadata: {
    // ton identifiant utilisateur interne (celui utilisÃ© pour crÃ©er la conversion)
    pimmsCustomerId: user.id,
    // rÃ©cupÃ¨re le pimms_id depuis le cookie (conseillÃ©) ou window.pimms_id
    pimmsClickId: pimms_id
  }
})
```

### Option B â€” Mise Ã  jour dâ€™un client existant

MÃªme logique, mais avec `.update` :

```js
import { stripe } from "@/lib/stripe"

const user = {
  id: "user_123",
  email: "user@example.com",
  teamId: "team_xxxxxxxxx"
}

const pimms_id = req.headers.get("pimms_id")

await stripe.customers.update(user.id, {
  metadata: {
    // ton identifiant utilisateur interne (celui utilisÃ© pour crÃ©er la conversion)
    pimmsCustomerId: user.id,
    // rÃ©cupÃ¨re le pimms_id depuis le cookie (conseillÃ©) ou window.pimms_id
    pimmsClickId: pimms_id
  }
})
```

âœ… Cela permet Ã  PiMMs de rattacher les paiements futurs (factures, renouvellements...) au clic dâ€™origine.

## 4. Ce que PiMMs suit automatiquement

Une fois lâ€™intÃ©gration en place, PiMMs Ã©coute automatiquement les Ã©vÃ©nements Stripe suivants :

- `checkout.session.completed` â€” Ã©vÃ©nement principal de conversion  
- `invoice.paid` â€” pour les abonnements  
- `customer.created`, `customer.updated` â€” pour la correspondance ID  
- `charge.refunded` â€” pour gÃ©rer les remboursements  

Tu nâ€™as **pas besoin de gÃ©rer les webhooks** : PiMMs sâ€™en occupe.

## Gestion des devises (bientÃ´t disponible)

La prise en charge multi-devises arrive bientÃ´t.

Pour lâ€™instant, PiMMs convertit automatiquement tous les montants en USD avec un taux de change en temps rÃ©el. Le paramÃ©trage de la devise au niveau de lâ€™espace de travail sera ajoutÃ© prochainement.

## Et si jâ€™utilise les Stripe Payment Links ?

Si tu utilises les Payment Links Ã  la place de Stripe Checkout, suis plutÃ´t ce guide :  
ğŸ‘‰ [Suivre les ventes avec Stripe Payment Links](/articles/setup-stripe-for-website)

## Câ€™est terminÃ© ğŸ‰

Stripe Checkout est maintenant entiÃ¨rement connectÃ© Ã  ton systÃ¨me dâ€™attribution PiMMs.

Chaque vente est reliÃ©e au bon lien, Ã  la bonne campagne, au bon utilisateur â€” sans aucun effort manuel.

ğŸ‘‰ [Suis ta premiÃ¨re vente](https://app.pimms.io)